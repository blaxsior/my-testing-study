# my testing
[테스팅 강의](https://www.udemy.com/course/javascript-unit-testing-the-practical-guide/)를 듣고 내용을 정리합니다.

# 테스팅이란
코드가 의도한 대로 요구사항에 맞게 동작하는지 검사하는 행위

## 테스팅 방식
- manual testing: 직접 개발자 / 사용자의 인력으로 테스팅하기
  - 테스트 계속 반복하기 쉽지 않음 + 코드 바꿀 때마다 직접 테스트해야
  - 사람이 직접 하는 일이라 에러가 발생하기 쉬움.
  - 모든 시나리오에 대해 완벽하게 반영하기 쉽지 않음 + 시간 오래 걸림 
- automated testing: 테스트 코드 작성해두고 테스팅 자동화
  - 초기 테스팅 코드를 작성하는 노력이 필요. but 한번 작성해두면 자동화
  - 항상 동일한 실행, 테스트 보장 -> 예측 가능 + 일관성
  - 테스트 코드는 축적 + 함께 실행되므로 많은 시나리오 커버가 가능
## 테스팅 종류
테스팅 자체는 엄청 다양하지만, 코드 부분에서는 3개 흐름 따른다.
- Unit Testing: 함수/클래스 같이 어플리케이션을 구성하는 작은 단위인 유닛을 테스트
  - 모든 유닛은 개별적으로 테스트 됨.
  - 모든 유닛이 의도적으로 동작하면, 전체 앱도 정상적으로 동작 -> Integration Testing
  - 변경 사항 및 에러를 빠르게 집어낼 수 있지만, 사용자 환경의 다양한 방해요소를 반영하지는 못함.
  - 수행 이유
    - 코드 변경할 때마다 직접 테스트하는 수고를 피할 수 있음
    - 유닛에 대한 테스트 작성하여 많은 코드 / 시나리오  커버 가능
    - 코드 변경되면 작성된 테스트 코드가 실행되서 버그 잡기 쉬움
    - 테스팅에 적합한, 더 좋은 / 깨끗한(clean) 코드를 작성할 수 있음
- Integration Testing: 유닛들이 함께 동작할 때도 정확히 동작하는지 평가하기 위해 유닛 조합을 테스팅
  - 유닛단위로는 잘 동작한다고 유닛을 결합했을 때 잘 동작한다는 보장은 없음
- E2E Testing: 유저 입장에서의 전체 흐름에 대해 테스팅
  - 유저 또는 외부 프로그램이 현재 프로그램과 어떻게 상호 작용하는지에 대한 테스트
  - 작은 유닛 단위가 아니라, 전체 시스템 흐름 단위에서 동작을 테스트
테스팅 방식에 따라 다루는 테스트 범위가 다르기 때문에 하나만 수행하는게 아니라 모두 수행하도록 노력해야 함.

## 테스트 코드를 작성하는 이유
- 일단 작성해두면 일일이 테스팅하지 않아도 됨
- 발생 가능한 에러를 탐지 및 방지함
- 테스트 코드는 해당 유닛에 대한 사용 예시가 될 수 있음
- 코드가 변경된 후에도 의도한 대로 동작하고 있는지 평가하면서 의도하지 않은 버그나 에러를 수정할 수 있음
# 테스트 설정
- test runner: 테스팅 코드를 수행하는 부분
  - 메인 어플리케이션과 관계 없는 테스팅 전용 도구, 개발 환경
  - 테스트 코드를 식별 / 실행 / 결과 출력
  - 언어마다 다양한 도구 존재
- assertion library: 테스트에 대한 기대값을 정의, 성공 / 실패 판정
  - 코드 실행을 통해 기대되는 결과(outcome) 정의
  - 기대값에 대한 결과를 매칭
  - 모든 가능한 기대값 / 상황 커버 가능 (sync / async 등)

## CLI 옵션
모든 명령은 ```vitest```로 시작
| 옵션 | 설명 |
|-|-|
|(없음)| 감시 모드로 실행 |
| run | 감시 없이 실행 |
| reporter &lt;name&gt; | 자세한 설명 추가<br>default, verbose, dot, junit, json 옵션 |
| globals | 테스트 파일 내에서 전역 사용(import X) |
# 테스팅 기초
## AAA 패턴
- Arrange: 테스팅에 사용되는 환경 / 값을 정의
- Act: 대상 코드 및 함수를 실행
- Assert: 생성된 결과를 기대값과 비교 -> 성공 / 실패 여부 판단  

AAA 패턴을 이용하는 경우 코드에 대한 가독성과 이해가 좋아진다.

- 테스팅 과정에서 하드 코딩은 가능한 한 피하자.
- 테스팅 함수가 아닌 다른 방법으로 기대값을 계산할 수 있다면 하드코딩하는 대신 해당 방법으로 기대값을 정의하자.

## 테스팅 시 기억할 점
- 테스트는 최대한 간단하게 유지하자
  - 특정 조건을 만족할 때 함수의 동작이 바뀌는게 아니라면, 복잡한 테스트는 다른 사람이 함수를 이해하기 어렵게 만들 뿐이다.
- 여러 상황에 대한 테스트를 수행하자
  - 단일 테스트는 단일 상황만 커버하므로, 하나의 테스트케이스만으로는 모든 상황을 커버할 수 없음
  - 정상적인 입력 / 비정상적 입력 / 에러 발생 상황 등 다양한 경우를 고려해야 함
- 테스팅은 반복적인 작업이다. 필요할 때마다 계속 추가 + 수정하자
  - 현재 작성한 테스트 코드는 현재 상황을 커버한다. 그러나 점차 개발이 진행됨에 따라 기존에 생각하지 못했던 케이스나, 완전히 새로운 케이스에 대한 대응이 필요할 수 있다. 이런 경우 추가적인 테스트 코드를 작성하여 유닛이 기대처럼 동작하는지 보장해야 한다.